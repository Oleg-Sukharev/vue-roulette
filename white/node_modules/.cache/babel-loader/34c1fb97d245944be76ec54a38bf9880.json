{"remainingRequest":"/Users/oleg/Desktop/magic/local/vue-roulette/node_modules/babel-loader/lib/index.js!/Users/oleg/Desktop/magic/local/vue-roulette/src/plugins/Translation.js","dependencies":[{"path":"/Users/oleg/Desktop/magic/local/vue-roulette/src/plugins/Translation.js","mtime":1596629345369},{"path":"/Users/oleg/Desktop/magic/local/vue-roulette/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/oleg/Desktop/magic/local/vue-roulette/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvb2xlZy9EZXNrdG9wL21hZ2ljL2xvY2FsL3Z1ZS1yb3VsZXR0ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IGkxOG4gfSBmcm9tICcuLi9pMThuJzsKdmFyIFRyYW5zID0gewogIGdldCBkZWZhdWx0TG9jYWxlKCkgewogICAgcmV0dXJuIHByb2Nlc3MuZW52LlZVRV9BUFBfSTE4Tl9MT0NBTEU7CiAgfSwKCiAgZ2V0IHN1cHBvcnRlZExvY2FsZXMoKSB7CiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuVlVFX0FQUF9JMThOX1NVUFBPUlRFRF9MT0NBTEUuc3BsaXQoJywnKTsKICB9LAoKICBnZXQgY3VycmVudExvY2FsZSgpIHsKICAgIHJldHVybiBpMThuLmxvY2FsZTsKICB9LAoKICBzZXQgY3VycmVudExvY2FsZShsb2NhbGUpIHsKICAgIGkxOG4ubG9jYWxlID0gbG9jYWxlOwogIH0sCgogIGdldFVzZXJTdXBwb3J0ZWRMb2NhbGU6IGZ1bmN0aW9uIGdldFVzZXJTdXBwb3J0ZWRMb2NhbGUoKSB7CiAgICB2YXIgdXNlclByZWZlcnJlZExvY2FsZSA9IFRyYW5zLmdldFVzZXJMb2NhbGUoKTsKCiAgICBpZiAoVHJhbnMuaXNMb2NhbGVTdXBwb3J0ZWQodXNlclByZWZlcnJlZExvY2FsZS5sb2NhbGUpKSB7CiAgICAgIHJldHVybiB1c2VyUHJlZmVycmVkTG9jYWxlLmxvY2FsZTsKICAgIH0KCiAgICBpZiAoVHJhbnMuaXNMb2NhbGVTdXBwb3J0ZWQodXNlclByZWZlcnJlZExvY2FsZS5sb2NhbGVOb0lTTykpIHsKICAgICAgcmV0dXJuIHVzZXJQcmVmZXJyZWRMb2NhbGUubG9jYWxlTm9JU087CiAgICB9CgogICAgcmV0dXJuIFRyYW5zLmRlZmF1bHRsb2NhbGU7CiAgfSwKICBnZXRVc2VyTG9jYWxlOiBmdW5jdGlvbiBnZXRVc2VyTG9jYWxlKCkgewogICAgdmFyIGxvY2FsZSA9IHdpbmRvdy5uYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgd2luZG93Lm5hdmlnYXRvci51c2VyTGFuZ3VhZ2UgfHwgVHJhbnMuZGVmYXVsdExvY2FsZTsKICAgIHJldHVybiB7CiAgICAgIGxvY2FsZTogbG9jYWxlLAogICAgICBsb2NhbGVOb0lTTzogbG9jYWxlLnNwbGl0KCctJylbMF0KICAgIH07CiAgfSwKICBzZXRJMThuTG9jYWxlSW5TZXJ2aWNlczogZnVuY3Rpb24gc2V0STE4bkxvY2FsZUluU2VydmljZXMobG9jYWxlKSB7CiAgICBUcmFucy5jdXJyZW50TG9jYWxlID0gbG9jYWxlOwogICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0FjY2VwdC1MYW5ndWFnZSddID0gbG9jYWxlOwogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpLnNldEF0dHJpYnV0ZSgnbGFuZycsIGxvY2FsZSk7CiAgICByZXR1cm4gbG9jYWxlOwogIH0sCiAgY2hhbmdlTG9jYWxlOiBmdW5jdGlvbiBjaGFuZ2VMb2NhbGUobG9jYWxlKSB7CiAgICBpZiAoIVRyYW5zLmlzTG9jYWxlU3VwcG9ydGVkKGxvY2FsZSkpIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0xvY2FsZSBub3Qgc3VwcG9ydGVkJykpOwogICAgaWYgKGkxOG4ubG9jYWxlID09PSBsb2NhbGUpIHJldHVybiBQcm9taXNlLnJlc29sdmUobG9jYWxlKTsKICAgIHJldHVybiBUcmFucy5sb2FkTG9jYWxlRmlsZShsb2NhbGUpLnRoZW4oZnVuY3Rpb24gKG1zZ3MpIHsKICAgICAgaTE4bi5zZXRMb2NhbGVNZXNzYWdlKGxvY2FsZSwgbXNncy5kZWZhdWx0IHx8IG1zZ3MpOwogICAgICByZXR1cm4gVHJhbnMuc2V0STE4bkxvY2FsZUluU2VydmljZXMobG9jYWxlKTsKICAgIH0pOwogIH0sCiAgbG9hZExvY2FsZUZpbGU6IGZ1bmN0aW9uIGxvYWRMb2NhbGVGaWxlKGxvY2FsZSkgewogICAgcmV0dXJuIGltcG9ydCgiQC9sb2NhbGVzLyIuY29uY2F0KGxvY2FsZSwgIi5qc29uIikpOwogIH0sCiAgaXNMb2NhbGVTdXBwb3J0ZWQ6IGZ1bmN0aW9uIGlzTG9jYWxlU3VwcG9ydGVkKGxvY2FsZSkgewogICAgcmV0dXJuIFRyYW5zLnN1cHBvcnRlZExvY2FsZXMuaW5jbHVkZXMobG9jYWxlKTsKICB9LAogIHJvdXRlTWlkZGxld2FyZTogZnVuY3Rpb24gcm91dGVNaWRkbGV3YXJlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgbG9jYWxlID0gdG8ucGFyYW1zLmxvY2FsZTsKICAgIGlmICghVHJhbnMuaXNMb2NhbGVTdXBwb3J0ZWQobG9jYWxlKSkgcmV0dXJuIG5leHQoVHJhbnMuZ2V0VXNlclN1cHBvcnRlZExvY2FsZSgpKTsKICAgIHJldHVybiBUcmFucy5jaGFuZ2VMb2NhbGUobG9jYWxlKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIG5leHQoKTsKICAgIH0pOwogIH0sCiAgaTE4blJvdXRlOiBmdW5jdGlvbiBpMThuUm91dGUodG8pIHsKICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRvKSwge30sIHsKICAgICAgcGFyYW1zOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICBsb2NhbGU6IHRoaXMuY3VycmVudExvY2FsZQogICAgICB9LCB0by5wYXJhbXMpCiAgICB9KTsKICB9Cn07CmV4cG9ydCB7IFRyYW5zIH07"},{"version":3,"sources":["/Users/oleg/Desktop/magic/local/vue-roulette/src/plugins/Translation.js"],"names":["axios","i18n","Trans","defaultLocale","process","env","VUE_APP_I18N_LOCALE","supportedLocales","VUE_APP_I18N_SUPPORTED_LOCALE","split","currentLocale","locale","getUserSupportedLocale","userPreferredLocale","getUserLocale","isLocaleSupported","localeNoISO","defaultlocale","window","navigator","language","userLanguage","setI18nLocaleInServices","defaults","headers","common","document","querySelector","setAttribute","changeLocale","Promise","reject","Error","resolve","loadLocaleFile","then","msgs","setLocaleMessage","default","includes","routeMiddleware","to","from","next","params","i18nRoute"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { i18n } from '../i18n'\n\nconst Trans = {\n  get defaultLocale() {\n    return process.env.VUE_APP_I18N_LOCALE\n  },\n  get supportedLocales() {\n    return process.env.VUE_APP_I18N_SUPPORTED_LOCALE.split(',')\n  },\n  get currentLocale() {\n    return i18n.locale\n  },\n  set currentLocale(locale) {\n    i18n.locale = locale\n  },\n  getUserSupportedLocale() {\n    const userPreferredLocale = Trans.getUserLocale()\n\n    if (Trans.isLocaleSupported(userPreferredLocale.locale)) {\n      return userPreferredLocale.locale\n    }\n\n    if (Trans.isLocaleSupported(userPreferredLocale.localeNoISO)) {\n      return userPreferredLocale.localeNoISO\n    }\n    return Trans.defaultlocale\n  },\n  getUserLocale() {\n    const locale = window.navigator.language || window.navigator.userLanguage || Trans.defaultLocale\n    return {\n      locale: locale,\n      localeNoISO: locale.split('-')[0]\n    }\n  },\n  setI18nLocaleInServices(locale) {\n    Trans.currentLocale = locale\n    axios.defaults.headers.common['Accept-Language'] = locale\n    document.querySelector('html').setAttribute('lang', locale)\n    return locale\n  },\n  changeLocale(locale) {\n    if (!Trans.isLocaleSupported(locale)) return Promise.reject(new Error('Locale not supported'))\n    if (i18n.locale === locale) return Promise.resolve(locale)\n    return Trans.loadLocaleFile(locale).then(msgs => {\n      i18n.setLocaleMessage(locale, msgs.default || msgs)\n      return Trans.setI18nLocaleInServices(locale)\n    })\n  },\n  loadLocaleFile(locale) {\n    return import(`@/locales/${locale}.json`)\n  },\n  isLocaleSupported(locale) {\n    return Trans.supportedLocales.includes(locale)\n  },\n  routeMiddleware(to, from, next) {\n    const locale = to.params.locale\n    if (!Trans.isLocaleSupported(locale)) return next(Trans.getUserSupportedLocale())\n    return Trans.changeLocale(locale).then(() => next())\n  },\n  i18nRoute(to) {\n    return {\n      ...to,\n      params: {\n        locale: this.currentLocale,\n        ...to.params\n      }\n    }\n  }\n}\n\nexport {\n  Trans\n}\n"]}]}